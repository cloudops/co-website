<!DOCTYPE html>
<html><head>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

   
   
   
   
   <link rel="stylesheet" as="style" type="text/css" href="/css/style.min.ffc82ac39d7e27734f941f1d1f55d0ee976305004ef32340c769aabc72e1bf7f.css" integrity="sha256-/8gqw51&#43;J3NPlB8dH1XQ7pdjBQBO8yNAx2mqvHLhv38=" crossorigin="anonymous" media="screen" />
    
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    
    <link rel="icon no-follow" href="/images/favicon.ico" type="image/x-icon">
    
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,600,600i,700|Open+Sans:400,700&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/d8b2e2ddb4.js" crossorigin="anonymous"></script>


    
        <title>CloudOps - Réseautage Kubernetes 101</title>
    
</head><body>
            
            
<div class="navbar-card" id="main-nav">
  <nav class="navbar navbar-expand-xl">
    
    <a class="navbar-brand mr-auto" href="/">
      <img src="/images/CO-logo-horizontal.svg" width="230px" alt="CloudOps logo">
    </a>
    <a class="navbar-toggler" data-toggle="collapse" data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"><i class="fas fa-hamburger"></i></span>
    </a>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto list-group list-group-flush">

        <li class="nav-item dropdown">
          <a class="nav-link" href="/solutions" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">Solutions</a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <div class="row">
              <div class="col-xl-12 nav-main-section">
                <a href="/solutions"><button>Solutions Overview</button></a>
              </div>
            </div>
            <div class="row">
              <div class="col-xl-3 offset-xl-1 col-lg-3 offset-lg-0 solutions-dropdown-items-group">
                <a href="/using-cloud"><h3 class="dropdown-item list-group-item list-group-item-action">Using Cloud</h3></a>
                <a class="dropdown-item list-group-item list-group-item-action" href="/cloud-native-consulting">Cloud Native Consulting</a>
                <a class="dropdown-item list-group-item list-group-item-action" href="/cloud-migration">Cloud Migration</a>
                <a class="dropdown-item list-group-item list-group-item-action" href="/managed-services-augmented-support">Managed Services <br> Augmented Support</a>



              </div>
              <div class="col-xl-3 offset-xl-0 col-lg-3 offset-lg-1 solutions-dropdown-items-group">
                <a href="/delivering-cloud"><h3 class="dropdown-item list-group-item list-group-item-action">Delivering Cloud</h3></a>
                <a class="dropdown-item list-group-item list-group-item-action" href="/delivering-cloud-consulting">Consulting</a>
                <a class="dropdown-item list-group-item list-group-item-action" href="/managed-services-augmented-support">Managed Services <br> Augmented Support</a>
              </div>

              <div class="col-xl-3 offset-xl-0 col-lg-3 offset-lg-1 solutions-dropdown-items-group">
                <a href="/transformations"><h3 class="dropdown-item list-group-item list-group-item-action">Transformations</h3></a>
                <a class="dropdown-item list-group-item list-group-item-action" href="/transformations/#devops-transformation">DevOps Transformation</a>
                <a class="dropdown-item list-group-item list-group-item-action" href="/transformations/#cloudops-transformation">CloudOps Transformation</a>
                <a class="dropdown-item list-group-item list-group-item-action" href="/transformations/#devnetops">DevNetOps Transformation</a>
              </div>
            </div>
            <div class="row">
              <div class="col-xl-3 nav-cta">
                <img src="/images/navbar-arrows.svg">
              </div>
              <div class="col-xl-9 nav-cta horizontal-nav-cta">
                  <a href="/devops-platform-practices-assessment" target="_blank"><h2>Not sure where to start?</h2>
                <p>Your journey with CloudOps begins with a DevOps Platform and Practices Assessment to get an objective status report and recommendations</p><div class="triangle-right">
                    <div class="inner-triangle"></div></a>
              </div>
            </div>
          </div>
        </li>
        <li class="nav-item dropdown" id="training-dropdown-menu">
          <a class="nav-link" href="/training" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Training</a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <div class="row solutions-dropdown-row">
              <div class="col-xl-4 col-lg-4 training-dropdown-items-group">
                  <a class="dropdown-item list-group-item list-group-item-action" href="/workshops">
                <img src="/images/nav-workshops.svg" height="70px">
                <h3>Workshops</h3></a>
              </div>
              <div class="col-xl-4 col-lg-4 training-dropdown-items-group">
                  <a class="dropdown-item list-group-item list-group-item-action" href="/experts">
                <img src="/images/nav-experts.svg" height="70px">
                <h3>Our Experts</h3></a>
              </div>
              <div class="col-xl-4 col-lg-4 training-dropdown-items-group">
                  <a class="dropdown-item list-group-item list-group-item-action" href="/calendar">
                <img src="/images/nav-calendar.svg" height="70px">
                <h3>Calendar</h3></a>
              </div>
            </div>
            <div class="row">
              <div class="col-xl-3 nav-cta">
                <img src="/images/navbar-arrows.svg">
              </div>
              <div class="col-xl-9 nav-cta horizontal-nav-cta">
                <a href="/blog/quiz-are-you-a-kubernetes-unicorn/" target="_blank">
                <h2>Are you a Kubernetes unicorn?</h2>
                <p>Take our quiz to find out</p>
              </a>
              </div>
            </div>
          </div>
        </li>
        <li class="nav-item dropdown reading-dropdown">
          <a class="nav-link" href="/reading" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown"
            data-reference="parent" data-offset="50%,20" aria-haspopup="true" aria-expanded="false">Reading</a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <div class="row">
              <div class="col-xl-3 nav-cta">
                <img src="/images/navbar-arrows.svg">
                <a href="https://cdn2.hubspot.net/hubfs/732832/Gated%20Content/WP_Securing%20Your%20DevOps%20Platform%20Enterprise_2019.pdf" target="_blank">
                <h2>Secure your DevOps platform</h2>
                <p>White paper highlighting how to handle security challenges faced by enterprises</p>
                </a>
              </div>
              <div class="col-xl-9">
                <div class="row solutions-dropdown-row">
                  <div class="col-xl-2 offset-xl-1 col-lg-2 offset-lg-1">
                      <a href="/blog"><img src="/images/nav-blog.svg" height="70px"></a>
                  </div>
                  <div class="col-xl-3 col-lg-3">
                      <a href="/blog"><h3 class="dropdown-item list-group-item list-group-item-action">Blog</h3></a>
                      <a class="dropdown-item list-group-item list-group-item-action" href="/blog">Blog Posts</a>
                    <a class="dropdown-item list-group-item list-group-item-action" href="/blog#community-news">Community News</a>
                    <a class="dropdown-item list-group-item list-group-item-action" href="/blog#cloudops-press">CloudOps Press</a>
                  </div>
                  <div class="col-xl-2 offset-xl-0 col-lg-2">
                      <a href="/resources"><img src="/images/nav-resources.svg" height="70px"></a>
                  </div>
                  <div class="col-xl-3 col-lg-3">
                    <a href="/resources"><h3 class="dropdown-item list-group-item list-group-item-action">Resources</h3></a>
                    <a class="dropdown-item list-group-item list-group-item-action" href="/resources/white-papers/">White Papers</a>
                    <a class="dropdown-item list-group-item list-group-item-action" href="/resources/case-studies/">Case Studies</a>
                    <a class="dropdown-item list-group-item list-group-item-action" href="/resources/infographics/">Infographics</a>
                    <a class="dropdown-item list-group-item list-group-item-action" href="/resources/one-pagers/">One Pagers</a>
                  </div>
                </div>
              </div>
            </div>
        </li>
        <li class="nav-item dropdown company-dropdown">
          <a class="nav-link" href="/company" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown"
            data-reference="parent" data-offset="50%,20" aria-haspopup="true" aria-expanded="false">Company</a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <div class="row">
              <div class="col-xl-3 nav-cta">
                <img src="/images/navbar-arrows.svg">
                <a href="/blog/cloudops-manifesto/" target="_blank">
                <h2>The CloudOps Manifesto</h2>
                <p>11 key success factors we have learned from our adventures in the cloud</p></a>
              </div>
              <div class="col-xl-6 nav-main-section">
                <a href="/why-cloudops"><button>Why choose CloudOps</button></a>
                <div class="row sub-nav-items">
                  <div class="col-xl-3 offset-xl-2 col-lg-3 offset-lg-3">
                    <img src="/images/description-logo.svg" width="70px">
                  </div>
                  <div class="col-xl-6 col-lg-6">
                    <a class="dropdown-item list-group-item list-group-item-action" href="/about-us"><h3>About Us</h3></a>
                    <a class="dropdown-item list-group-item list-group-item-action" href="/partners"><h3>Partners</h3></a>
                    <a class="dropdown-item list-group-item list-group-item-action" href="/careers"><h3>Careers</h3></a>
                    <a class="dropdown-item list-group-item list-group-item-action" href="/calendar#events"><h3>Events Calendar</h3></a>
                  </div>
                </div>
              </div>
              <div class="col-xl-3 nav-cta">
                <img src="/images/navbar-arrows.svg">
                <a href="blog/staff-augmentation-vs-project-based-services-for-devops-and-cloud-projects/">
                <h2>Accelerate your software release cycles</h2>
                <p>Comparing staff augmentation to project-based services for DevOps and cloud projects</p>
                </a>
              </div>
            </div>
          </div>
        </li>
        <li class="nav-item">
          <a href="/contact-us"><button class="btn" type="submit">Contact</button></a>
        </li>
 
        

      </ul>
    </div>

  </nav>

  

</div><div class="container-fluid main-content">
<main class="post">
    <div class="row">
        <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1 col-md-10 offset-md-1 col-sm-12 col-xs-12">
            <article>
                <header>
                    <h1>Réseautage Kubernetes 101</h1>
                    <div> June 3, 2020 / Chanpreet Kaur </div>
                </header>
                
                
                
                <img src="/fr/blog/reseautage-kubernetes-101/K8s-Networking_hu3d38fb4d20789838caf078b11a3ef3ad_160923_400x0_resize_q75_box.jpg" />
                
                
                <p>Le réseautage est un élément très important lorsqu’il s’agit d’architectures basées sur les miscroservices. Kubernetes offre un soutien de première classe pour toute une gamme de configurations de réseautage différentes. Essentiellement, il vous offre un réseau simple et isolé à l’échelle du cluster. En arrière-scène, le réseautage Kubernetes peut être très complexe à cause de tous les différents modules d’extension de réseautage. Il serait utile de garder en tête les concepts les plus simples avant d’essayer d’identifier le flux de paquets de réseautage individuels.</p><p>Il est important d’avoir une assez bonne compréhension des différents types de services et  d’ingresses afin de choisir la configuration adéquate pour votre cluster et ainsi minimiser la complexité et les ressources impliquées (comme des équilibreurs de charge provisionnés).</p><p>Pour commencer, voici quelques notions utiles :</p><p>1. Chaque pod se voit assigner une adresse IP unique.</p><p>2. Les pods sont exploités au sein d’un réseau virtuel, spécifié par le réseautage CIDR (routage interdomaine sans classe) du pod.</p><p>3. Les conteneurs à l’intérieur d’un pod individuel partagent le même namespace de réseau (Linux network namespace), cela signifie qu’ils peuvent tous être rejoints via un hôte local (localhost) et qu’ils partagent le même espace de port.</p><p>4. Tous les conteneurs sont configurés de façon à utiliser un serveur DNS qui est géré par Kubernetes.</p><h3>Fournir un accès externe à votre cluster</h3><p>Le processus qui requiert un accès externe pour entrer dans votre cluster fonctionne un peu différemment que de simplement écouter sur un port ouvert. À la place, un service d’entrée d’équilibreur de charge (<em>LoadBalancer</em>) ou un service de <em>NodePort</em> sera utilisé, on en reparlera ci-dessous.</p><h3>Inspection de l’adresse IP d’un pod</h3><p>Il est souvent utile d’identifier l’adresse I’P d’un pod. Cette valeur se trouve dans les métadonnées à l’intérieur de l’état du cluster Kubernetes.</p><p>Vous pouvez effectuer l’inspection de l’adresse IP en suivant les commandes suivantes :</p><pre class="wp-block-code"><code>$ kubectl get pod -o yaml busybox | grep podIP
podIP: 10.10.3.4</code></pre><p>De cette manière, vous éviterez d’avoir à exécuter manuellement dans le conteneur avec la commande ip addr ou autrement. Vous pouvez aussi visualiser cela avec l’argument <strong>-o wide</strong> vers <strong>kubectl get pods</strong>.</p><pre class="wp-block-code"><code>$ kubectl get pods -o wide
NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES
busybox 0/1 Completed 0 2d8h 10.10.3.4 node-1 &lt;none&gt; &lt;none&gt;</code></pre><h2>Services</h2><p>L’un des principes fondamentaux de réseautage dans Kubernetes est un service. Tout comme les déploiements, les services sont définis de façon déclarative et ont des «&thinsp;contrôleurs&thinsp;» qui y sont associés qui regardent et qui approvisionnent les ressources autour du service. Les services sont reliés au concept de «&thinsp;découverte de service&thinsp;», ce qui signifie de permettre aux différentes applications de se découvrir ou de communiquer entre elles. Les services simplifient le processus de gestion des adresses IP individuelles autour de conteneurs en fonction.</p><p>En termes pratiques, par exemple, un service peut cibler un ou plusieurs pods exploités sur n’importe quels nœuds de cluster. Cela arrive habituellement via une résolution DNS privée et interne. Pour chaque service défini, Kubernetes créera une entrée DNS. Cela permet aux pods de chercher les noms d’hôtes et de recevoir la bonne adresse IP de pod.</p><h3>Types de service</h3><p>Il existe une grande variété de configurations de services qui sont soutenues. Voici les quatre types de services de base:</p><h4>Adresse IP de base : Cluster IP</h4><p>C’est le type de service par défaut et l’un des plus simples. Deux grandes<br> propriétés sont définies, le nom du service et le sélecteur. Le nom du service est un identifiant unique, tandis que le sélecteur précise ce que le service doit router vers la cible.</p><h4>NodePort</h4><p>Les NodePorts sont semblables aux Cluster IP sauf que tous les nœuds ont<br> des ports, soit spécifiés ou aléatoires, attribués à leur service. Les requêtes de réseaux vers des ports sur n’importe quels des nœuds sont mandatés dans le service.</p><h4>Équilibreur de charge</h4><p>Les équilibreurs de charge sont semblables aux ClusterIP, mais ils sont provisionnés de façon externe et ont des adresses IP publiques qui leur sont assignées. L’équilibreur de charge sera spécifique à la mise en œuvre. On l’utilise souvent dans des plateformes infonuagiques.</p><h4>Nom externe</h4><p>Deux grandes propriétés sont définies, le nom du service et le domaine externe&thinsp;; un alias de nom de domaine, en quelque sorte. Même si cela pourrait sembler étrange ou inutile, cela vous permet de définir un service qui est référencé dans différents endroits (pods ou autres services) et de gérer le point d’extrémité/ domaine externe défini en un seul endroit. Cela vous permet aussi d’abstraire le domaine en tant que service afin de l’échanger plus tard pour un autre service Kubernetes.</p><h3>Sélecteur</h3><p>Dans le cas des trois premiers types de service, nous avons un sélecteur. Il s’agit de sélectionner les pods pour cibler ceux qui traiteront la requête de réseau (l’exportation ou «&thinsp;output&thinsp;» du service). Par exemple, nous pourrions avoir un service Web où nous ciblons tous les pods qui ont une étiquette «&thinsp;app&thinsp;» et une valeur de «&thinsp;web&thinsp;».</p><h3>Configuration d’un service simple</h3><p>Créer un nouveau fichier appelé <strong>web-app-service.yaml</strong> et dont le contenu est:</p><pre class="wp-block-code"><code>apiVersion: v1
kind: Service
metadata:
 name: web-service
spec:
 ports:
 - name: http
 port: 80
 selector:
 app: web</code></pre><p>Créez-le et décrivez-le :</p><pre class="wp-block-code"><code>$ kubectl create -f web-app-service.yaml
service/web-service created</code></pre><pre class="wp-block-code"><code>$ kubectl describe services web-service
Name: web-service
Namespace: default
Labels: &lt;none&gt;
Annotations: &lt;none&gt;
Selector: app=web
Type: ClusterIP
IP: 10.97.7.119
Port: http 80/TCP
TargetPort: 80/TCP
Endpoints: &lt;none&gt;
Session Affinity: None
Events: &lt;none&gt;</code></pre><p>Dans le cas ci-dessus, nous voyons que le point d’extrémité est nul. Endpoints: . Cette valeur montre les adresses IP du pod qui correspondent au sélecteur app=web spécifié, dans ce cas-ci, aucun ( pas de correspondance).</p><p>Maintenant, créons deux pods avec les bonnes étiquettes qui correspondent au sélecteur. Nous pouvons faire ça en créant simplement deux pods gérés manuellement (plutôt que par un déploiement) en suivant les commandes suivantes :</p><pre class="wp-block-code"><code>$ kubectl run httpbin --generator=run-pod/v1 --image=kennethreitz/httpbin --labels=”app=web”
pod/httpbin created
$ kubectl run httpbin-2 --generator=run-pod/v1 --image=kennethreitz/httpbin --labels=”app=web”
pod/httpbin-2 created</code></pre><p>Une fois que ces pods sont planifiés et qu’ils fonctionnent bien, nous pouvons faire l’inspection des services encore une fois. Nous devrions voir ce qui suit pour les (points d’extrémités) <strong>Endpoints:</strong></p><pre class="wp-block-code"><code>$ kubectl describe services web-service |
grep “Endpoints”
Endpoints:
172.17.0.3:80,172.17.0.4:80</code></pre><p>Ces adresses IP appartiennent aux pods que nous venons de créer!</p><h3>Accéder aux services</h3><p>Comme j’ai mentionné plus haut, Kubernetes a crée une entrée DNS pour chaque service défini. Dans le cas du service que nous avons crée, le serveur DNS de Kubernetes arrêtera le nom d’hôte du service Web vers l’un des pods dans le service Web. Pour démontrer l’exemple, nous pouvons exécuter curl dans l’un des conteneurs, en nous assurant d’installer curl comme s’il n’était pas inclus par défaut!</p><pre class="wp-block-code"><code>$ kubectl exec -it httpbin -- /bin/bash
$ apt update
...
$ apt install curl
...
$ curl web-service
&lt;!DOCTYPE html&gt;
&lt;html lang=”en”&gt;
&lt;head&gt;
 &lt;meta charset=”UTF-8”&gt;
 &lt;title&gt;httpbin.org&lt;/title&gt;
...</code></pre><h3>Configuration d’un accès externe via un service NodePort</h3><p>NodePort est l’un des moyens les plus simples de fournir un accès externe à vos pods Kubernetes. Pour configurer un service NodePort, nous devons configurer explicitement le «&thinsp;spec type&thinsp;» (autrement, par défaut, il s’agit de ClusterIP) dans une configuration de service :</p><pre class="wp-block-code"><code>spec:
 type: NodePort</code></pre><p>Pour en configurer un, créer un nouveau fichier appelé <strong>web-app-nodeport-service.yaml </strong>et dont le contenu est :</p><pre class="wp-block-code"><code>apiVersion: v1
kind: Service
metadata:
 name: web-service-nodeport
spec:
 type: NodePort
 ports:
 - name: http
 port: 80
 selector:
 app: web</code></pre><p>Créez-le et décrivez-le :</p><pre class="wp-block-code"><code>$ kubectl create -f web-app-nodeport-service.yaml
service/web-service-nodeport created
$ kubectl get services web-service-nodeport
NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE
web-service-nodeport NodePort 10.101.203.150 &lt;none&gt; 80:32285/TCP 23s</code></pre><p>En jetant un coup d’œil au champ <strong>PORT</strong>, nous pouvons voir qu’on lui a attribué le port <strong>32285</strong>. C’est le port qui est attribué à chacun de nos nœuds Kubernetes, qui à leur tour, mandateront les pods appropriés.</p><p>Nous pouvons le tester en effectuant les commandes suivantes (prenez bien note qu’il faudra utiliser votre adresse IP ou nom de domaine spécifique. Dans mon cas, ce n’est que l’adresse IP du nœud interne de 192.168.122.188):</p><pre class="wp-block-code"><code>$ curl 192.168.122.188:32285
&lt;!DOCTYPE html&gt;
&lt;html lang=”en”&gt;
&lt;head&gt;
 &lt;meta charset=”UTF-8”&gt;
...</code></pre><h2>Ingresses (entrées réseau)</h2><p>Les ingresses désignent un autre objet Kubernetes. Essentiellement, ce sont des versions d’un service aux fonctionnalités plus complètes. La fonction principale des ingresses tourne autour du routage des requêtes HTTP, ils partagent aussi des similarités avec les<br> services. Vous aurez besoin d’installer ou de configurer un contrôleur d’ingresses spécifique, car il ne sera pas nécessairement configuré par défaut. De plus, plusieurs contrôleurs d’ingresses peuvent fonctionner au même moment. Habituellement, chaque contrôleur ne gère que les ingresses qui ont les annotations kubernetes. io/ingress.class appropriées relatives au contrôleur spécifique.</p><p>Les ingresses ciblent les services et non les pods.</p><h3>Contrôleurs d’ingresses</h3><p>Même si les contrôleurs d’ingresses se conforment tous à une interface ou spécification commune, ils incluent une configuration spécifique à la mise en place. Le contrôleur d’ingresses «&thinsp;nginx ingress controller&thinsp;» est l’une des plus populaires. Cela fait habituellement référence au projet suivant :</p><p><a href="https://github.com/kubernetes/ingress-nginx">https://github.com/kubernetes/ingress-nginx</a> qui est un contrôleur riche en fonctionnalités offrant du soutien à l’authentification HTTP, à l’affinité de session, réécriture d’URL, et plus encore.</p><h3>Configuration d’une entrée simple</h3><p>Créez un nouveau fichier appelé <strong>app-ingress.yaml</strong> et dont le contenu est (prenez note que nous mettons en place une règle pour un hôte de <strong>example.com</strong>) :</p><pre class="wp-block-code"><code>apiVersion: networking.k8s.io/v1beta1
kind: Ingress
metadata:
 name: app-ingress
 annotations:
 nginx.ingress.kubernetes.io/rewrite-target: /
spec:
 rules:
 - http:
 paths:
 - path: /
 backend:
 serviceName: web-service
 servicePort: 80</code></pre><p>Créez-le et décrivez-le :</p><pre class="wp-block-code"><code>$ kubectl create -f app-ingress.yaml
ingress.networking.k8s.io/app-ingress
created</code></pre><pre class="wp-block-code"><code>$ kubectl describe ingresses app-ingress
Name: app-ingress
Namespace: default
Address: 192.168.122.188
Default backend: default-http-backend:80 (172.17.0.8:8080)
Rules:
 Host Path Backends
 ---- ---- --------
 example.com
 / web-service:80 (172.17.0.3:80,172.17.0.4:80)
Annotations:
 nginx.ingress.kubernetes.io/rewrite-target: /
Events:
 Type Reason Age From Message
 ---- ------ ---- ---- -------
 Normal CREATE 21m nginx-ingress-controller Ingress default/app-ingress
 Normal UPDATE 67s (x5 over 20m) nginx-ingress-controller Ingress default/app-ingress</code></pre><p>Et si nous essayons d’envoyer une requête HTTP avec curl à l’adresse IP de l’ingress :</p><pre class="wp-block-code"><code> $ curl -H “Host: example.com”
http://192.168.122.188
&lt;!DOCTYPE html&gt;
&lt;html lang=”en”&gt;
&lt;head&gt;
 &lt;meta charset=”UTF-8”&gt;
 &lt;title&gt;httpbin.org&lt;/title&gt;
 &lt;link href=”https://fonts.googleapis.com/css?family=Open+Sans:400,700|-
Source+Code+Pro:300,600|Titillium+Web:400,600,700”
...</code></pre><p>D’un autre côté, si nous essayons un hôte que nous n’avons pas configuré :</p><pre class="wp-block-code"><code> $ curl -H “Host: example123.com”
http://192.168.122.188
default backend - 404</code></pre><p>Nous obtenons la réponse 404 page non trouvée – ce qui semble tout à fait adéquat, on ne s’attendait pas à autre chose!</p><h3>Configuration d’un ingress avec SSL</h3><p>Nous utiliserons un certificat autosigné pour démontrer la fonction SSL.</p><p>Nous n’avons pas encore parlé des «&thinsp;secrets&thinsp;», mais nous allons devoir en installer un afin de configurer une clé SSL et un certificat pour un ingress.</p><p>Pour cela, il faut effectuer la commande suivante :</p><pre class="wp-block-code"><code>$ kubectl create secret tls ssl-example-cert --key ssl.key --cert ssl.cert
secret/ssl-example-cert created</code></pre><p>Nous pouvons ajouter un certificat SSL en précisant le secret, sous la clé spec dans un ingress :</p><p>tls:</p><pre class="wp-block-code"><code> - secretName: ssl-example-cert</code></pre><p>Autrement dit, le contenu de notre fichier ingress sera :</p><pre class="wp-block-code"><code>apiVersion: networking.k8s.io/v1beta1
kind: Ingress
metadata:
 name: app-ingress
 annotations:
 nginx.ingress.kubernetes.io/rewrite-target: /
spec:
 tls:
 - secretName: ssl-example-cert
 rules:
 - host: example.com
 http:
 paths:
 - path: /
 backend:
 serviceName: web-service
 servicePort: 80</code></pre><p>Maintenant, si nous essayons de point d’extrémité HTTPS du ingress (en ajoutant aussi le paramètre -k à curl afin d’ignorer l’erreur de certificat autosigné), nous verrons :</p><pre class="wp-block-code"><code>$ curl -k -H “Host: example.com”
https://192.168.122.188/
&lt;!DOCTYPE html&gt;
&lt;html lang=”en”&gt;
&lt;head&gt;
 &lt;meta charset=”UTF-8”&gt;
 &lt;title&gt;httpbin.org&lt;/title&gt;
 &lt;link href=”https://fonts.googleapis.com/css?family=Open+Sans:400,700|-
Source+Code+Pro:300,600|Titillium+Web:400,600,700”
...</code></pre><p>Maintenant que vous avez découvert le réseau Kubernetes, il est temps d’en apprendre davantage. Notre ebook “<a href="https://info.cloudops.com/azure-kubernetes-services-la-securite-des-conteneurs-pour-un-monde-infonuagique-0">The Beginner’s Guide to Kubernetes</a>” vous montrera ce qui peut être fait de plus avec la mise en réseau Kubernetes et vous offrira des ressources à propos des déploiements, des volumes et de la sécurité de Kubernetes.</p>
<div class="row">
    <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1 col-md-10 offset-md-1 col-sm-12 col-xs-12 cta-image">
      <img src="/images/blog/cta/kubernetesfr.png">
    </div>
</div>
            </article>
        </div>
    </div>


    <div class="row nav-buttons back-foward in-content">
        <div
            class="col-xl-4 offset-xl-2 col-lg-5 offset-lg-1 col-md-5 offset-md-1 col-sm-5 offset-sm-1 col-xs-2 back-button">
            
            <a href="/fr/blog/comparaison-des-services-mailles-istio-linkerd-et-consul-connect-x/"><button class="btn">
                    <div class="triangle-left">
                        <div class="inner-left-triangle"></div>
                    </div>Previous Post
                </button></a>
            
        </div>
        <div class="col-xl-4 col-lg-5 col-md-5 col-sm-5 col-xs-2 foward-button">
                
            <a href="/fr/blog/le-nuage-cause-t-il-des-changements-climatiques/">
                <button class="btn">
                    Next Post<div class="triangle-right">
                        <div class="inner-triangle"></div>
                    </div>
                </button></a>
                
        </div>
    </div>

    <div class="social">
        

<style>
#share-buttons {display: inline-block; vertical-align: middle; }
#share-buttons:after {content: ""; display: block; clear: both;}
#share-buttons > div {
position: relative;
text-align: left; 
height: 36px; 
float: left; 
text-align: center;
}
#share-buttons > div > svg {height: 36px; fill: #005D91; margin-top: 0;}
#share-buttons > div:hover {cursor: pointer;}
#share-buttons > div.facebook:hover > svg {fill: #3B5998;}
#share-buttons > div.twitter:hover > svg {fill: #55ACEE;}
#share-buttons > div.linkedin:hover > svg {fill: #0077b5;}
#share-buttons > div.mail:hover > svg {fill: #7D7D7D;}
#share-buttons > div.facebook > svg {height: 30px; margin: auto 5px;}
#share-buttons > div.twitter > svg {height: 30px; margin: auto 5px;}
#share-buttons > div.linkedin > svg {height: 30px; margin: auto 5px;}
#share-buttons > div.mail > svg {height: 30px; margin: auto 5px;}
</style>

<div id="share-buttons">
<div class="facebook" title="Share this on Facebook" onclick="window.open('http://www.facebook.com/share.php?u=\/fr\/blog\/reseautage-kubernetes-101\/');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759h-306v-759h-255v-296h255v-218q0-186 104-288.5t277-102.5q147 0 228 12z"/></svg></div>
<div class="twitter" title="Share this on Twitter" onclick="window.open('http://twitter.com/home?status=\/fr\/blog\/reseautage-kubernetes-101\/');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5t-115.5 248.5-184.5 210.5-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5t-114-159.5q33 5 61 5 43 0 85-11-112-23-185.5-111.5t-73.5-205.5v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5t371.5 99.5q-8-38-8-74 0-134 94.5-228.5t228.5-94.5q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"/></svg></div>
<div class="linkedin" title="Share this on Linkedin" onclick="window.open('https://www.linkedin.com/shareArticle?mini=true&url=\/fr\/blog\/reseautage-kubernetes-101\/&title=&summary=&source=');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M477 625v991h-330v-991h330zm21-306q1 73-50.5 122t-135.5 49h-2q-82 0-132-49t-50-122q0-74 51.5-122.5t134.5-48.5 133 48.5 51 122.5zm1166 729v568h-329v-530q0-105-40.5-164.5t-126.5-59.5q-63 0-105.5 34.5t-63.5 85.5q-11 30-11 81v553h-329q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5 114.5-15.5q171 0 275 113.5t104 332.5z"/></svg></div>
<div class="mail" title="Share this through Email" onclick="window.open('mailto:?&body=\/fr\/blog\/reseautage-kubernetes-101\/');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1792 710v794q0 66-47 113t-113 47h-1472q-66 0-113-47t-47-113v-794q44 49 101 87 362 246 497 345 57 42 92.5 65.5t94.5 48 110 24.5h2q51 0 110-24.5t94.5-48 92.5-65.5q170-123 498-345 57-39 100-87zm0-294q0 79-49 151t-122 123q-376 261-468 325-10 7-42.5 30.5t-54 38-52 32.5-57.5 27-50 9h-2q-23 0-50-9t-57.5-27-52-32.5-54-38-42.5-30.5q-91-64-262-182.5t-205-142.5q-62-42-117-115.5t-55-136.5q0-78 41.5-130t118.5-52h1472q65 0 112.5 47t47.5 113z"/></svg></div>
</div>

        <i class="far fa-copy copy-page-link"></i>
    </div>

    

    <div class="contact-us-card general-stylings-more-content">
            <div class="row">
                <div class="col-xl-8 offset-xl-2 col-lg-8 offset-lg-2 col-md-10 offset-md-1 col-sm-12 col-xs-12 cta-cards">
                    <div class="card-deck">
                        <div class="card">
                            <a
                                href="https://cdn2.hubspot.net/hubfs/732832/CloudOps%20White%20Paper%20-%20A%20PreFlight%20Checklist%20for%20Cloud%20Migration.pdf">
                                <div class="card-body">
                                    <h3 class="card-title">A checklist for your cloud migration</h3>
                                    <p class="card-text">Download the white paper to get a step by step guide to a successful migration strategy.</p>
                                </div>
                                <div class="corner-triangle"></div>
                            </a>
                        </div>
                        <div class="card">
                            <a
                                href="/blog/the-cloudops-delivery-model-accelerated-value-delivery-through-code-and-collaboration">
                                <div class="card-body">
                                    <h3 class="card-title"> Accelerated value delivery</h3>
                                    <p class="card-text">Read more on how to maximize value through our unique delivery model.</p>
                                    <div class="corner-triangle"></div>
                            </a>
                        </div>
                    </div>
                    <div class="card">
                        <a href="https://cdn2.hubspot.net/hubfs/732832/Cloud-Ops_Cloud-Migration_v3.pdf">
                            <div class="card-body">
                                <h3 class="card-title">Cloud migration one-pager</h3>
                                <p class="card-text">
                                    Everything you need to know about how our services can help get your cloud journey started.
                                    <div class="corner-triangle"></div>
                            </div>
                        </a>
                    </div>
                    <div class="card">
                        <a href="/contact-us">
                            <div class="card-body">
                                <h3 class="card-title">Networking is the hardest part</h3>
                                <p class="card-text">Contact us to learn more about our hardware and software-defined networking solutions.</p>
                                <div class="corner-triangle"></div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>

    </div>
</main>

        </div><div class="footer">
    <div class="row no-gutters logo">
        <div class="col-sm-12">
            <a href="/"><img class="cloudops-logo" src="/images/cO-logo-horizontal.png"
                    height="45px" width="auto"></a>
        </div>
    </div>

    <div class="row no-gutters footer-content">
        <div class="col-xl-3 offset-xl-2 col-lg-3 offset-lg-0 col-md-12">

            <a href="https://twitter.com/CloudOps_" target="_blank"><i class="fab fa-twitter"></i></a>
            <a href="https://www.linkedin.com/company/cloudops" target="_blank"><i class="fab fa-linkedin-in"></i></a>
            <a href="https://www.facebook.com/Cloud0ps/" target="_blank"><i class="fab fa-facebook-f"></i></a>
            <h5>Newsletter Signup</h5>
            <div class="newsletter-form">
                    <div class="newsletter-form">

<script charset="utf-8" type="text/javascript" src="//js.hsforms.net/forms/v2.js"></script>
<script>
  hbspt.forms.create({
	portalId: "732832",
	formId: "25575fb9-f01b-43a6-b9cd-2c154efad9f4"
});
</script>
                </div>
            </div>
        </div>
        <div class="col-xl-2 col-lg-3 col-md-12 col-sm-12 footer-nav">
            <h6>Services</h6>
            <ul>
                <li><a href="/cloud-native-consulting">Cloud Native Consulting</a></li>
                <li><a href="/transformations">Transformations</a></li>
                <li><a href="/managed-services-augmented-support">Support</a></li>
                <li><a href="/delivering-cloud">Delivering Cloud</a></li>
            </ul>
        </div>

        <div class="col-xl-2 col-lg-3 col-md-12 footer-nav">
            <h6>Learning</h6>
            <ul>
                <li><a href="/workshops">Workshops</a></li>
                <li><a href="/blog/blog-posts">Blog</a></li>
                <li><a href="/resources/white-papers">White Papers</a></li>
                <li><a href="/resources/case-studies">Case Studies</a></li>
            </ul>
        </div>

        <div class="col-xl-2 col-lg-3 col-md-12 footer-nav">
            <h6>Company</h6>
            <ul>
                <li><a href="/about-us">About Us</a></li>
                <li><a href="/careers">Careers</a></li>
                <li><a href="/partners">Partners</a></li>
                <li><a href="/why-cloudops">Why Cloudops</a></li>
            </ul>
        </div>
    </div>

    <div class="row no-gutters copyright">
        <div class="col-sm-12">
            <p>&copy; CloudOps. Tous droits réservés. // <a href="/privacy-policy">Privacy Policy</a></p>
        </div>
    </div>
</div>
        <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
        <script src="https://unpkg.com/clipboard@2/dist/clipboard.min.js"></script>
        <script src="/js/main.js"></script>

        </body>
</html>